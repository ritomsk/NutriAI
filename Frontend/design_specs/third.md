# Design Specification: Chat & Analysis Interface(for chat page)

**Context:** Core interaction loop for the AI Food Ingredient Guide.
**UX Goal:** A seamless transition from "Inquiry" (Input) to "Insight" (Analysis), minimizing cognitive load during the wait time and maximizing clarity in the results.

---

## 1. Interaction Flow & State Management

The interface operates on three distinct states. The UI must handle the transitions between these states fluidly to maintain user engagement.

1.  **State A: The Prompt (Input)** â€” Clean, focused, centered.
2.  **State B: The Synthesis (Loading)** â€” Engaging, reassuring.
3.  **State C: The Insight (Results)** â€” Structured, scannable, actionable.

---

## 2. State A: The Prompt (Input Interface)

**Position:** Vertically and Horizontally centered in the viewport.

### A. The Input Complex
A floating "Glassmorphic" container.
* **Main Input Field:** A large text area (auto-expanding height) allowing users to paste long lists of ingredients.
    * *Placeholder:* "Paste ingredients list or ask about a product..."
* **The '+' Accessory Button:**
    * *Location:* Inside the input container, aligned to the left.
    * *Interaction:* Click triggers a **Popover/Dropdown Menu**.
    * *Dropdown Options:*
        1.  **ðŸ“ Upload Image:** Triggers system file picker.
        2.  **ðŸ“· Scan Product:** Triggers Browser Camera API permission request.

### B. The "Scan Product" Mode (Camera Overlay)
If "Scan Product" is selected:
* The Input Box fades out.
* A video viewfinder appears (rounded corners, matching the glass theme).
* **Overlay:** A "scanning bracket" animation over the video feed to indicate active detection.
* **Capture Button:** Replaces the text input area.

### C. The Primary Action Button
* **Label:** "Analyze Ingredients"
* **Location:** Centered below the Input Complex.
* **Style:** High-emphasis gradient background (Brand Primary).
* **Behavior:** Disabled state (opacity 0.5) until input is detected. On click, trigger **State B**.

---

## 3. State B: The Synthesis (Loading Animation)

**UX Philosophy:** Wait times feel shorter when the user is entertained or informed.
**Transition:** The Input Complex and Button fade out (`opacity: 0`, `scale: 0.95`).

### The "Alchemical" Loader
Instead of a generic spinner, use a custom animation representing "ingredients being analyzed."
* **Visual:** Three floating orbs (representing the mesh gradient colors) revolving around a central point, merging and separating.
* **Micro-copy:** Cycling text below the animation to show progress:
    * *"Parsing text..."*
    * *"Checking safety databases..."*
    * *"Synthesizing summary..."*

---

## 4. State C: The Insight (Results Interface)

**Transition:** The Loader dissolves. The Results container slides in from the bottom (`translateY: 20px` â†’ `0`).

### Component 1: The Executive Summary (Top)
A high-level verdict. Users should know "Good" or "Bad" in 1 second.
* **Container:** Full-width card with a subtle border glow.
* **Dynamic Styling:**
    * *Safe:* Soft Green background tint (`bg-green-50/50`), Green border.
    * *Caution/Unsafe:* Soft Red background tint (`bg-red-50/50`), Red border.
* **Content:** A 2-3 sentence paragraph summarizing the overall health impact (generated by LLM).

### Component 2: The Ingredient Cards (Grid)
A masonry or flex-grid layout below the summary.
* **Card Logic:** Each distinct ingredient gets a card.
* **Color Coding:**
    * **Green Card:** Natural/Safe ingredients.
    * **Red Card:** Additives/Preservatives/Sugar (highlighted based on severity).
* **Content:**
    * *Title:* Ingredient Name.
    * *Body:* Brief "Plain English" description.
    * *Icon:* A small checkmark (safe) or warning triangle (caution).

### Component 3: The Confidence Meter (Bottom)
Transparency about AI limitations builds trust.
* **Visual:** A Semi-circle Gauge or Linear Progress Bar.
* **Animation:** On load, the bar fills from 0% to the specific value (e.g., 92%) with a "bouncing" ease-out effect.
* **Label:** "AI Confidence Score: 92%"
* **Context Tooltip:** "Based on clarity of input text and database matches."

### Component 4: The Loop (Footer)
* **Element:** A clear link or ghost button.
* **Label:** "Start New Chat" or "Analyze Another Item".
* **Action:** Clears state and transitions back to **State A** (Input).

---

## 5. Technical Considerations (Frontend)

* **API Latency:** If the request takes >5 seconds, the Loading State micro-copy must update to apologize ("This is taking a bit longer than usual...").
* **Camera Permissions:** Must handle "Permission Denied" states gracefully with a fallback to manual upload.
* **Responsive:** On mobile, the "Scan Product" option should likely be the primary action (floating action button) rather than hidden in a dropdown.